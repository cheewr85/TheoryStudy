
# Process vs Thread
## 정의
프로세스
- 운영체제로부터 자원을 할당받은 작업의 단위 
- 실행 중인 컴퓨터 프로그램

프로그램
- 파일이 저장 장치에 저장되어 있지만 메모리에 올라오지 않은 정적인 상태. 
- 실행되어 동적 상태가 되면 프로세스. 

스레드
- 프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위


##  스레드
![process](/sejigner/img/os/process&thread/thread.png)
- 프로그램이 실행되면 프로세스가 되는데, 프로그램 내에서 프로세스 하나의 단위로 코드를 처리하게 되면 복잡한 로직을 수행하기 어려운 경우가 발생한다.
- 이를 해결하기 위해 고안된 것이 프로세스 내에 더 작은 실행 단위인 스레드이다. 
- 프로세스와 다르게 스레드끼리 메모리를 공유하면서 작동한다.
- 프로세스 내에서 각각의 스레드는 독립된 stack과 pc 레지스터 값을 사용하고, 나머지 code, data, heap은 공유한다.
	- 따라서, 한 스레드에서 문제가 생겼을 때 같은 프로세스 내의 다른 스레드 역시 영향을 받는다.
	- 스레드는 독립적인 함수 단위이기도 한다. 함수에 필요한 파라미터, 되돌아갈 주소값, 함수 내에서 선언된 변수 등은 스택에 저장되는데, 독립적인 함수 호출이 가능하려면 이러한 정보를 담고 있는 스택 역시 독립적이어야 한다. 따라서 코드, 데이터, 힙과 다르게 스택은 스레드마다 주어진다. 
	- 함수가 실행되다가 cpu 제어가 다른 곳으로 넘어갔을 때 현재 진행 상태를 기억해야한다. 따라서 PC 레지스터 역시 스레드마다 주어진다.


## 프로세스
![process](/sejigner/img/os/process&thread/process.png)
- 프로그램이 실행되어 프로세스의 형태로 메모리에 올라가면 운영체제로부터 시스템 자원을 할당받는다. 
- 하나 이상의 스레드를 갖는다.
- 이 때 Code, Data, Stack, Heap의 형태로 받게 된다. 다른 프로세스의 변수나 자료에 접근하는 것은 불가능하다.
- 프로세스 스택은 함수의 매개변수, 복귀 주소, 로컬 변수와 같은 임시 자료를 담고, 데이터는 전역 변수들을 담는다.
- 프로세스 간 독립성이 보장되기 때문에 한 프로세스가 비정상적으로 종료되어도 다른 프로세스에 영향을 주지 않는다.
- 프로세스 제어 블록(Process Control Block, PCB)
	- 프로세스의 중요한 정보를 저장하고 있는 운영체제의 자료구조이다.
	- 운영체제가 프로세스를 관리하기 위해 프로세스를 생성하면서 같이 생성한다.
	- 프로세스 전환이 필요할 때 하던 작업의 진행 상황을 PCB에 담고, 다시 제어권을 넘겨 받을 때 PCB에서 불러와서 이어서 작업한다.
	- PCB가 취급하는 정보의 유형
		-   프로세스 식별자(Process ID, PID) : 프로세스 식별번호
		-   프로세스 상태 : new, ready, running, waiting, terminated 등의 상태를 저장
		-   프로그램 카운터 : 프로세스가 다음에 실행할 명령어의 주소
		-   CPU 레지스터
		-   CPU 스케쥴링 정보 : 프로세스의 우선순위, 스케줄 큐에 대한 포인터 등
		-   메모리 관리 정보 : 페이지 테이블 또는 세그먼트 테이블 등과 같은 정보를 포함
		-   입출력 상태 정보 : 프로세스에 할당된 입출력 장치들과 열린 파일 목록
		-   어카운팅 정보 : 사용된 CPU 시간, 시간제한, 계정번호 등


> Written with [StackEdit](https://stackedit.io/).
